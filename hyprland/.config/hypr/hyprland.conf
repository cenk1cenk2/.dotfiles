# vim:ft=hyprlang
#
# Hyprland configuration
# Modular structure inspired by Sway configuration
#
# Read `man 5 hyprland.conf` for a complete reference.

# Environment variables
env = XDG_SESSION_TYPE, wayland
env = XDG_CURRENT_DESKTOP, Hyprland

# Libseat backend
env = LIBSEAT_BACKEND, logind

# WLR settings
env = WLR_RENDERER_ALLOW_SOFTWARE, 1
env = WLR_XWAYLAND, /usr/local/bin/Xwayland

# Qt settings
env = QT_QPA_PLATFORM, wayland
env = QT_QPA_PLATFORMTHEME, hyprqt6engine
env = QT_WAYLAND_DISABLE_WINDOWDECORATION, 1

# GTK settings
env = GTK_USE_PORTAL, 1
env = GDK_BACKEND, wayland
env = GDK_DEBUG, portals

# Gaming optimizations
env = DXVK_ASYNC, 1
env = MANGOHUD, 1

# Docker
env = DOCKER_BUILDKIT, 1

# Firefox/Mozilla
env = MOZ_ENABLE_WAYLAND, 1
env = MOZ_DBUS_REMOTE, 1

# Add mise shims and user bin to PATH
env = PATH, $HOME/.local/share/mise/shims:$HOME/.local/bin:$PATH

# Theme variables - set the folder for your theme definition file
$theme = ~/.config/hypr/themes/custom

# Source theme definitions
source = $theme/definitions.conf

# Source user variables
source = ~/.config/hypr/definitions.conf

# Source input configurations
source = ~/.config/hypr/inputs/*.conf

# Source output configurations
source = ~/.config/hypr/outputs/*.conf

# Source modes (submaps)
source = ~/.config/hypr/modes/*.conf

# Base configuration settings
general {
    border_size = 2
    gaps_in = 2
    gaps_out = -8
    layout = dwindle
    resize_on_border = true
    extend_border_grab_area = 15

    allow_tearing = true
}

decoration {
    rounding = 0
    active_opacity = 1.0
    inactive_opacity = 0.95
    dim_inactive = false
    dim_strength = 0.1

    blur {
        enabled = true
        size = 6
        passes = 2
        noise = 0.01
        contrast = 0.9
        brightness = 1.0
    }

    shadow {
        enabled = true
        range = 8
        render_power = 2
    }
}

animations {
    enabled = true

    bezier = smoothOut, 0.36, 0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1, 0.5, 1
    bezier = overshot, 0.4, 0.8, 0.2, 1.2

    animation = windows, 1, 1, overshot, slide
    animation = windowsOut, 1, 1, smoothOut, slide
    animation = border, 1, 2, default
    animation = fade, 1, 2, smoothIn
    animation = fadeDim, 1, 2, smoothIn
    animation = workspaces, 1, 2, overshot, slidevert
}

dwindle {
    pseudotile = true
    preserve_split = true
    force_split = 2
    smart_split = false
    smart_resizing = true
}

master {
    new_status = master
    new_on_top = false
}

gestures {
    workspace_swipe_distance = 300
    workspace_swipe_cancel_ratio = 0.5

    # 3-finger horizontal swipe to switch workspaces
    gesture = 3, horizontal, workspace
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = 0
    vfr = true
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
}

xwayland {
    force_zero_scaling = true
}

source = ~/.config/hypr/config.d/*.conf
