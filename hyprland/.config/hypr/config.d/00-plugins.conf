# vim:ft=hyprlang

### Hyprland Plugins

exec-once = hyprpm update 2>/dev/null || true

# hy3 - i3/sway-like tiling layout
# https://github.com/outfoxxed/hy3

# Auto-install and load plugins at startup
exec-once = ~/.config/hypr/scripts/install-plugins.sh

plugin {
  hy3 {
    # disable gaps when only one window is on workspace
    no_gaps_when_only = 1

    # policy controlling what happens when a node is removed from a group,
    # leaving only a group
    # 0 = remove the nested group
    # 1 = keep the nested group
    # 2 = keep the nested group only if its parent is a tab group
    node_collapse_policy = 2

    # tab group settings
    tabs {
      # height of the tab bar
      height = 15

      # padding between the tab bar and its focused node
      padding = 5

      # tab bar should animate in/out from the top instead of below the window
      from_top = false

      # rounding of tab bar corners
      rounding = 0

      # render the window title on the bar
      render_text = true

      # center the window title
      text_center = false

      # font to render the window title with
      text_font = $gui-font

      # height of the window title
      text_height = 11

      # left padding of the window title
      text_padding = 3

      # active tab bar segment color (matches Sway client.focused border)
      col.active = $color3

      # urgent tab bar segment color (matches Sway client.urgent)
      col.urgent = $color1

      # inactive tab bar segment color (matches Sway client.focused_inactive)
      col.inactive = $color8

      # active tab bar text color (matches Sway client.focused text)
      col.text.active = $color16

      # urgent tab bar text color (matches Sway client.urgent background)
      col.text.urgent = $color0

      # inactive tab bar text color (matches Sway client.unfocused text)
      col.text.inactive = $color7
    }

    # autotiling settings
    autotile {
      # enable autotile
      enable = true

      # make autotile-created groups ephemeral
      ephemeral_groups = true

      # if a window would be squished smaller than this width, a vertical split will be created
      # -1 = never automatically split vertically
      # 0 = always automatically split vertically
      trigger_width = 800

      # if a window would be squished smaller than this height, a horizontal split will be created
      # -1 = never automatically split horizontally
      # 0 = always automatically split horizontally
      trigger_height = 600

      # a space or comma separated list of workspace ids where autotile should be enabled
      # it's possible to create an exception rule by prefixing the definition with "not:"
      # workspaces = 1,2 # autotiling will only be enabled on workspaces 1 and 2
      # workspaces = not:1,2 # autotiling will be enabled on all workspaces except 1 and 2
      workspaces = all
    }
  }
}

### hy3 Keybinding Overrides
# These override the default Hyprland keybindings in modes/default.conf
# to use hy3's superior tiling system instead

# Override split keybindings to use hy3
# default.conf has: $mod+x = togglesplit, $mod+v = togglesplit
# hy3 provides: proper directional splits like i3/sway
bind = $mod, x, hy3:makegroup, h, ephemeral  # horizontal split (override togglesplit)
bind = $mod, v, hy3:makegroup, v, ephemeral  # vertical split (override togglesplit)

# Override layout toggle to use hy3 tabbed groups
# default.conf has: $mod+e = togglegroup
# hy3 provides: proper tabbed container groups
bind = $mod, e, hy3:makegroup, tab  # tabbed layout (override togglegroup)

# Additional hy3-specific keybindings (no conflicts)
bind = $mod, z, hy3:expand, expand    # expand window in tiling
bind = $mod SHIFT, z, hy3:expand, shrink  # shrink window in tiling
